<h1>Upload key and certificate</h1>


<div *ngIf="certificateLimitReached" class="alert alert-warning">You reached the maximum number of certificates.</div>

<div class="row" *ngIf="!certificateLimitReached">
  <div class="col mr-5">
    <form (ngSubmit)="onSubmit()" #form="ngForm">

      <div *ngIf="globalError" class="alert alert-danger">{{globalError}}</div>

      <div class="form-group">
        <label for="name">Name</label>
        <div class="small p-1">This name is used for your own reference. It will not be part of the certificate. <br/>Example:
          "My QWAC certificate"
        </div>
        <input type="text" class="form-control" name="name" id="name" [(ngModel)]="uploadKeyAndCertificate.name" required
               appNotEmpty maxlength="50" #name=ngModel>
        <div [hidden]="!(name.touched && name.invalid)" class="alert alert-danger">Name is required</div>
      </div>
      <div class="form-group">
        <label for="description">Description(optional)</label>
        <div class="small p-1">The description is used for your own reference. It will not be part of the certificate
        </div>
        <input type="text" class="form-control" name="description" id="description"
               [(ngModel)]="uploadKeyAndCertificate.description"
               appNotEmpty maxlength="50">
      </div>
      <div class="form-group">
        <label for="purpose">Purpose</label>
        <div class="small p-1">Certificates can be used for either signing or transport (TLS).</div>
        <select class="form-control" name="purpose" id="purpose"
                [(ngModel)]="uploadKeyAndCertificate.purpose" required appNotEmpty maxlength="50" #purpose=ngModel>
          <option value="TRANSPORT">Transport (eIDAS QWAC)</option>
          <option value="SIGNING">Signing (eIDAS QSEAL)</option>
        </select>
        <div [hidden]="!(purpose.touched && purpose.invalid)" class="alert alert-danger">Purpose is required</div>
      </div>


      <div class="form-group">
        <label for="key">Private key</label>
        <div class="small p-1">Enter your private key here. Uploading private keys is allowed only for sandbox keys.
        </div>
        <textarea rows="12" class="form-control" name="key" id="key" [(ngModel)]="uploadKeyAndCertificate.privateKey"
                  required
                  appNotEmpty #key=ngModel></textarea>
        <div [hidden]="!(key.touched && key.invalid)" class="alert alert-danger">Key is required</div>
      </div>

      <div class="form-group">
        <label for="cert">Certificate</label>
        <div class="small p-1">Enter your certificate here
        </div>
        <textarea rows="12" class="form-control" name="cert" id="cert" [(ngModel)]="uploadKeyAndCertificate.certificate"
                  required
                  appNotEmpty #cert=ngModel></textarea>
        <div [hidden]="!(cert.touched && cert.invalid)" class="alert alert-danger">Certificate is required</div>
      </div>
      <br/>
      <button type="submit" class="btn btn-success" [disabled]="!form.form.valid">Save</button>
    </form>
  </div>
  <div class="col">Hello</div>
</div>


